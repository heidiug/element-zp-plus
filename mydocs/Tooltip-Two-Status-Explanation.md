# Tooltip ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªçŠ¶æ€å±æ€§ï¼Ÿ

## é—®é¢˜åˆ†æ

Tooltip ç»„ä»¶æœ‰ä¸¤ä¸ª**ç‹¬ç«‹çš„å…ƒç´ åŒºåŸŸ**ï¼š
1. **Referenceï¼ˆè§¦å‘å™¨ï¼‰**ï¼šæŒ‰é’®ã€å›¾æ ‡ç­‰è§¦å‘å…ƒç´ 
2. **Tooltipï¼ˆæç¤ºæ¡†ï¼‰**ï¼šå¼¹å‡ºçš„æç¤ºå†…å®¹

æˆ‘ä»¬éœ€è¦è·Ÿè¸ªé¼ æ ‡åœ¨å“ªä¸ªåŒºåŸŸï¼Œä»¥ä¾¿å®ç°ä»¥ä¸‹é€»è¾‘ï¼š
- âœ… é¼ æ ‡åœ¨æŒ‰é’®ä¸Š â†’ Tooltip æ˜¾ç¤º
- âœ… é¼ æ ‡åœ¨ Tooltip ä¸Š â†’ Tooltip ä¿æŒæ˜¾ç¤º
- âœ… é¼ æ ‡æ—¢ä¸åœ¨æŒ‰é’®ä¹Ÿä¸åœ¨ Tooltip â†’ Tooltip å…³é—­

## ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªå±æ€§ï¼Ÿ

### åœºæ™¯åˆ†æ

#### åœºæ™¯ 1ï¼šé¼ æ ‡ä»æŒ‰é’®ç§»åŠ¨åˆ° Tooltip

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æŒ‰é’®    â”‚ â† é¼ æ ‡åœ¨è¿™é‡Œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tooltip â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å½“é¼ æ ‡ç§»åŠ¨æ—¶ï¼š
1. è§¦å‘ handleReferenceLeave() â†’ referenceEnter = false
2. å¦‚æœ isEnter = false â†’ å¼€å§‹å»¶è¿Ÿå…³é—­ âŒ é”™è¯¯ï¼
3. ä½†å®é™…ä¸Šé¼ æ ‡æ­£åœ¨ç§»åŠ¨åˆ° Tooltip ä¸Š...
```

**é—®é¢˜**ï¼šå¦‚æœåªæœ‰ `isEnter`ï¼Œåœ¨é¼ æ ‡ç¦»å¼€æŒ‰é’®æ—¶ï¼Œ`isEnter` è¿˜æ˜¯ `false`ï¼ˆå› ä¸ºé¼ æ ‡è¿˜æ²¡è¿›å…¥ Tooltipï¼‰ï¼Œå°±ä¼šé”™è¯¯åœ°å¼€å§‹å…³é—­ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šéœ€è¦çŸ¥é“é¼ æ ‡**æ­£åœ¨ç¦»å¼€æŒ‰é’®**ï¼Œä½†**å¯èƒ½æ­£åœ¨ç§»åŠ¨åˆ° Tooltip**ã€‚

#### åœºæ™¯ 2ï¼šé¼ æ ‡ä» Tooltip ç§»åŠ¨åˆ°æŒ‰é’®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æŒ‰é’®    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tooltip â”‚ â† é¼ æ ‡ç¦»å¼€è¿™é‡Œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å½“é¼ æ ‡ç§»åŠ¨æ—¶ï¼š
1. è§¦å‘ handleTooltipLeave() â†’ isEnter = false
2. å¦‚æœ referenceEnter = false â†’ å¼€å§‹å»¶è¿Ÿå…³é—­ âŒ é”™è¯¯ï¼
3. ä½†å®é™…ä¸Šé¼ æ ‡å¯èƒ½æ­£åœ¨ç§»åŠ¨åˆ°æŒ‰é’®ä¸Š...
```

**é—®é¢˜**ï¼šå¦‚æœåªæœ‰ `isEnter`ï¼Œåœ¨é¼ æ ‡ç¦»å¼€ Tooltip æ—¶ï¼Œæ— æ³•çŸ¥é“é¼ æ ‡æ˜¯å¦å›åˆ°äº†æŒ‰é’®ä¸Šã€‚

## ä¸¤ä¸ªå±æ€§çš„ä½œç”¨

### 1. `referenceEnter` - é¼ æ ‡æ˜¯å¦åœ¨è§¦å‘å™¨ä¸Š

```typescript
referenceEnter: false  // é¼ æ ‡ä¸åœ¨æŒ‰é’®ä¸Š
referenceEnter: true   // é¼ æ ‡åœ¨æŒ‰é’®ä¸Š
```

**ä½œç”¨**ï¼š
- è·Ÿè¸ªé¼ æ ‡æ˜¯å¦åœ¨è§¦å‘å™¨ï¼ˆæŒ‰é’®ï¼‰åŒºåŸŸ
- ç”¨äºåˆ¤æ–­ï¼šå½“é¼ æ ‡ç¦»å¼€ Tooltip æ—¶ï¼Œæ˜¯å¦å›åˆ°äº†æŒ‰é’®ä¸Š

### 2. `isEnter` - é¼ æ ‡æ˜¯å¦åœ¨ Tooltip ä¸Š

```typescript
isEnter: false  // é¼ æ ‡ä¸åœ¨ Tooltip ä¸Š
isEnter: true   // é¼ æ ‡åœ¨ Tooltip ä¸Š
```

**ä½œç”¨**ï¼š
- è·Ÿè¸ªé¼ æ ‡æ˜¯å¦åœ¨ Tooltip åŒºåŸŸ
- ç”¨äºåˆ¤æ–­ï¼šå½“é¼ æ ‡ç¦»å¼€æŒ‰é’®æ—¶ï¼Œæ˜¯å¦ç§»åŠ¨åˆ°äº† Tooltip ä¸Š

## å®Œæ•´çš„é€»è¾‘æµç¨‹

### æƒ…å†µ 1ï¼šé¼ æ ‡ä»æŒ‰é’®ç§»åŠ¨åˆ° Tooltipï¼ˆä¿æŒæ˜¾ç¤ºï¼‰

```
æ­¥éª¤ 1: é¼ æ ‡åœ¨æŒ‰é’®ä¸Š
â”œâ”€ referenceEnter = true
â”œâ”€ isEnter = false
â””â”€ Tooltip æ˜¾ç¤º âœ…

æ­¥éª¤ 2: é¼ æ ‡ç¦»å¼€æŒ‰é’®ï¼Œå‘ Tooltip ç§»åŠ¨
â”œâ”€ handleReferenceLeave()
â”œâ”€ referenceEnter = false
â”œâ”€ æ£€æŸ¥: isEnter = false
â”œâ”€ ä½†æ˜¯ï¼é¼ æ ‡æ­£åœ¨ç§»åŠ¨ï¼Œå¯èƒ½å¾ˆå¿«å°±ä¼šè¿›å…¥ Tooltip
â””â”€ å»¶è¿Ÿå…³é—­ï¼ˆ1ç§’ï¼‰ â±ï¸

æ­¥éª¤ 3: é¼ æ ‡è¿›å…¥ Tooltipï¼ˆåœ¨å»¶è¿ŸæœŸé—´ï¼‰
â”œâ”€ handleTooltipEnter()
â”œâ”€ clearCloseTimer() âš¡ æ¸…é™¤å…³é—­å®šæ—¶å™¨ï¼
â”œâ”€ isEnter = true
â””â”€ Tooltip ç»§ç»­æ˜¾ç¤º âœ…

ç»“æœï¼šTooltip ä¿æŒæ˜¾ç¤ºï¼Œæ²¡æœ‰å…³é—­ âœ¨
```

### æƒ…å†µ 2ï¼šé¼ æ ‡ä» Tooltip å›åˆ°æŒ‰é’®ï¼ˆä¿æŒæ˜¾ç¤ºï¼‰

```
æ­¥éª¤ 1: é¼ æ ‡åœ¨ Tooltip ä¸Š
â”œâ”€ isEnter = true
â”œâ”€ referenceEnter = false
â””â”€ Tooltip æ˜¾ç¤º âœ…

æ­¥éª¤ 2: é¼ æ ‡ç¦»å¼€ Tooltipï¼Œå‘æŒ‰é’®ç§»åŠ¨
â”œâ”€ handleTooltipLeave()
â”œâ”€ isEnter = false
â”œâ”€ æ£€æŸ¥: referenceEnter = false
â”œâ”€ ä½†æ˜¯ï¼é¼ æ ‡å¯èƒ½æ­£åœ¨ç§»åŠ¨åˆ°æŒ‰é’®ä¸Š
â””â”€ å»¶è¿Ÿå…³é—­ï¼ˆ1ç§’ï¼‰ â±ï¸

æ­¥éª¤ 3: é¼ æ ‡å›åˆ°æŒ‰é’®ï¼ˆåœ¨å»¶è¿ŸæœŸé—´ï¼‰
â”œâ”€ handleReferenceEnter()
â”œâ”€ clearCloseTimer() âš¡ æ¸…é™¤å…³é—­å®šæ—¶å™¨ï¼
â”œâ”€ referenceEnter = true
â””â”€ Tooltip ç»§ç»­æ˜¾ç¤º âœ…

ç»“æœï¼šTooltip ä¿æŒæ˜¾ç¤ºï¼Œæ²¡æœ‰å…³é—­ âœ¨
```

### æƒ…å†µ 3ï¼šé¼ æ ‡ç¦»å¼€æ‰€æœ‰åŒºåŸŸï¼ˆå…³é—­ Tooltipï¼‰

```
æ­¥éª¤ 1: é¼ æ ‡åœ¨ Tooltip ä¸Š
â”œâ”€ isEnter = true
â”œâ”€ referenceEnter = false
â””â”€ Tooltip æ˜¾ç¤º âœ…

æ­¥éª¤ 2: é¼ æ ‡ç¦»å¼€ Tooltipï¼Œç¦»å¼€æŒ‰é’®
â”œâ”€ handleTooltipLeave()
â”œâ”€ isEnter = false
â”œâ”€ referenceEnter = false
â””â”€ å»¶è¿Ÿå…³é—­ï¼ˆ1ç§’ï¼‰ â±ï¸

æ­¥éª¤ 3: å»¶è¿Ÿæ—¶é—´åˆ°ï¼Œæ£€æŸ¥çŠ¶æ€
â”œâ”€ isEnter = false âœ…
â”œâ”€ referenceEnter = false âœ…
â””â”€ æ‰§è¡Œå…³é—­ âœ…

ç»“æœï¼šTooltip å…³é—­ âœ…
```

## å…³é”®ä»£ç é€»è¾‘

### handleReferenceLeave - ç¦»å¼€æŒ‰é’®æ—¶

```typescript
const handleReferenceLeave = () => {
  tooltipStatus.referenceEnter = false
  // å¦‚æœé¼ æ ‡ä¸åœ¨ Tooltip ä¸Šï¼Œå»¶è¿Ÿå…³é—­
  if (!tooltipStatus.isEnter) {
    delayedClose(close)()  // å»¶è¿Ÿ 1 ç§’å…³é—­
  }
  // å¦‚æœ isEnter = trueï¼ˆé¼ æ ‡åœ¨ Tooltip ä¸Šï¼‰ï¼Œä¸å…³é—­ âœ…
}
```

### handleTooltipLeave - ç¦»å¼€ Tooltip æ—¶

```typescript
const handleTooltipLeave = () => {
  tooltipStatus.isEnter = false
  // å¦‚æœé¼ æ ‡ä¸åœ¨ reference ä¸Šï¼Œå»¶è¿Ÿå…³é—­
  if (!tooltipStatus.referenceEnter) {
    delayedClose(close)()  // å»¶è¿Ÿ 1 ç§’å…³é—­
  }
  // å¦‚æœ referenceEnter = trueï¼ˆé¼ æ ‡åœ¨æŒ‰é’®ä¸Šï¼‰ï¼Œä¸å…³é—­ âœ…
}
```

### delayedClose - å»¶è¿Ÿå…³é—­æ—¶æ£€æŸ¥

```typescript
const delayedClose = (callback: () => void) => {
  return () => {
    clearCloseTimer()
    closeTimerId = setTimeout(() => {
      // å»¶è¿Ÿå…³é—­æ—¶ï¼Œå†æ¬¡æ£€æŸ¥é¼ æ ‡æ˜¯å¦è¿˜åœ¨ Tooltip ä¸Š
      if (!tooltipStatus.isEnter) {  // ğŸ‘ˆ å…³é”®æ£€æŸ¥
        callback()  // åªæœ‰é¼ æ ‡ä¸åœ¨ Tooltip ä¸Šæ—¶æ‰å…³é—­
      }
      closeTimerId = null
    }, 1000)
  }
}
```

## ä¸ºä»€ä¹ˆä¸åªç”¨ä¸€ä¸ªå±æ€§ï¼Ÿ

### âŒ å¦‚æœåªæœ‰ `isEnter`

```typescript
// åªæœ‰ isEnter çš„é—®é¢˜ï¼š

handleReferenceLeave() {
  // é¼ æ ‡ç¦»å¼€æŒ‰é’®
  // isEnter å¯èƒ½è¿˜æ˜¯ falseï¼ˆå› ä¸ºé¼ æ ‡è¿˜æ²¡è¿›å…¥ Tooltipï¼‰
  // å°±ä¼šç«‹å³å¼€å§‹å…³é—­ âŒ
}
```

**é—®é¢˜**ï¼šæ— æ³•åˆ¤æ–­é¼ æ ‡æ˜¯ç§»åŠ¨åˆ° Tooltip è¿˜æ˜¯ç¦»å¼€æ‰€æœ‰åŒºåŸŸã€‚

### âŒ å¦‚æœåªæœ‰ `referenceEnter`

```typescript
// åªæœ‰ referenceEnter çš„é—®é¢˜ï¼š

handleTooltipLeave() {
  // é¼ æ ‡ç¦»å¼€ Tooltip
  // referenceEnter æ˜¯ falseï¼ˆé¼ æ ‡ä¸åœ¨æŒ‰é’®ä¸Šï¼‰
  // å°±ä¼šç«‹å³å¼€å§‹å…³é—­ âŒ
}
```

**é—®é¢˜**ï¼šæ— æ³•åˆ¤æ–­é¼ æ ‡æ˜¯å¦æ­£åœ¨ä» Tooltip å›åˆ°æŒ‰é’®ã€‚

## æ€»ç»“

**ä¸¤ä¸ªå±æ€§çš„å¿…è¦æ€§**ï¼š

1. **`referenceEnter`** - è·Ÿè¸ªé¼ æ ‡åœ¨**è§¦å‘å™¨**ä¸Šçš„çŠ¶æ€
   - ç”¨äºï¼šåˆ¤æ–­é¼ æ ‡ç¦»å¼€ Tooltip æ—¶ï¼Œæ˜¯å¦å›åˆ°äº†æŒ‰é’®

2. **`isEnter`** - è·Ÿè¸ªé¼ æ ‡åœ¨**Tooltip**ä¸Šçš„çŠ¶æ€
   - ç”¨äºï¼šåˆ¤æ–­é¼ æ ‡ç¦»å¼€æŒ‰é’®æ—¶ï¼Œæ˜¯å¦ç§»åŠ¨åˆ°äº† Tooltip

3. **ç»„åˆåˆ¤æ–­** - åªæœ‰ä¸¤ä¸ªéƒ½æ˜¯ `false` æ—¶æ‰å…³é—­
   ```typescript
   if (!tooltipStatus.isEnter && !tooltipStatus.referenceEnter) {
     // é¼ æ ‡æ—¢ä¸åœ¨æŒ‰é’®ä¸Šï¼Œä¹Ÿä¸åœ¨ Tooltip ä¸Š
     // æ‰å…³é—­ Tooltip
   }
   ```

**å…³é”®ç‚¹**ï¼š
- å»¶è¿Ÿå…³é—­ï¼ˆ1ç§’ï¼‰ç»™é¼ æ ‡ç§»åŠ¨æ—¶é—´
- ä¸¤ä¸ªçŠ¶æ€å±æ€§ç¡®ä¿ä¸ä¼šè¯¯å…³é—­
- `clearCloseTimer()` åœ¨é¼ æ ‡è¿›å…¥æ—¶æ¸…é™¤å®šæ—¶å™¨

è¿™æ ·å°±å®ç°äº†å®Œç¾çš„"é¼ æ ‡å¯ä»¥æ”¾åœ¨ Tooltip ä¸Š"çš„æ•ˆæœï¼âœ¨

